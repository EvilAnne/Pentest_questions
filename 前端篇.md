UpdateTime:2018.11.27

1. 什么是同源策略?

`源就是主机、协议、端口名的一个三元组`
`同源策略(Same Origin Policy, SOP)是Web应用程序的一种安全模型，被广泛地应用在处理WEB内容的各种客户端上，比如各大浏览器，微软的Silverlight，Adobe的Flash/Acrobat等等。`

<br>
<br>
<br>

2. XSS 能用来做什么？

`网络钓鱼、窃取用户Cookies、弹广告刷流量、具备改页面信息、删除文章、获取客户端信息、传播蠕虫`
<br>
<br>
<br>

3. XSS的三种类型，防御方法

`反射型、Dom Base XSS、存储型`
`防御方法这个只能说个大概，毕竟这是一个比较大的话题，而且防御的方法还得看所在的业务等。`
`从网络层、主机层、Web层、数据库，通过CDN都有过滤常见一些攻击手法，但不能有CDN就以为可以了，添加CDN只是让攻击成本增高，开启HttpOnly，以防确实存在避免cookies被获取，CSP策略、再就是语言中提供的函数对输入过滤，以及输出编码以及ModSecurity类的防火墙。`
<br>
<br>
<br>

4. 存储型xss原理?

`如网站留言版，把插入的记录存储在数据库中，插入的代码会一直留在页面上，当其它用户访问会从数据库中读取并触发漏洞。`
<br>
<br>
<br>

5. 你怎么理解xss攻击？

`是一种被动型，在不知道的情况下触发类似无感型，在渗透很多情况下平常的渗透手段以及取得目标的信息，而XSS就能轻松获取，类似QQ邮箱你不可能渗透这么大的互联网就算可以时间成本都非常的高，XSS比较有针对性。`
<br>
<br>
<br>

6. 如何快速发现xss位置？

`各种输入的点，名称、上传、留言、可交互的地方，一切输入都是在害原则。`
<br>
<br>
<br>

7. Dom xss 原理/防范

`DOM型XSS并不需要服务器解析响应的直接参与触发XSS靠的是浏览器DOM解析`
`DOM—based XSS漏洞是基于文档对象模型Document Objeet Model,DOM)的一种漏洞。`
```javascript
cument.getElementById("a").innerHTML="yyyyyy";
```
`在输入点过滤敏感关键字`
<br>
<br>
<br>

8. DOM型XSS与反射型XSS区别？

`DOM型就是JavaScript中的Document对象HTML注入，直接浏览器处理。`
<br>
<br>
<br>

9. 如何使得前端 referer 为空

`通过地址栏输入、从书签里面选择或者浏览器的插件BurpSuite修改。`
<br>
<br>
<br>

10. cookie参数，security干什么的

```text
Httponly：防止cookie被xss偷

https：防止cookie在网络中被偷

Secure：阻止cookie在非https下传输，很多全站https时会漏掉

Path :区分cookie的标识，安全上作用不大，和浏览器同源冲突
```
<br>
<br>
<br>

11. 如果 SRC 上报了一个 XSS 漏洞，payload 已经写入页面，但未给出具体位置，如何快速介入？

`看是否什么类型的XSS，XSS反射型看提交的地址，指的参数是哪个位置，通过这个页面进行fuzzing测试。如果是存储型页面查找关键字。`
<br>
<br>
<br>

12. XSS， CSRF， CRLF比较容易弄混，说说三者的原理，防御方法

`CSRF跨站请求伪造，构靠已知的所有参数让对方访问,`

防护CSRF:
`防御原理：不让你那么容易伪造请求(cookie中加入随机数，要求请求中带上，而攻击者获取不到cookie中的随机数,验证HTTP Referer字段,在请求地址中添加takon验证
`

CRLF原理:

```text
HTTP拆分攻击（HTTP Splitting），CRLF是”回车 + 换行”（\r\n）的简称。

在HTTP协议中，HTTP Header与HTTP Body是用两个CRLF分隔的，浏览器就是根据这两个CRLF来取出HTTP 内容并显示出来。所以，一旦我们能够控制HTTP 消息头中的字符，注入一些恶意的换行，这样我们就能注入一些会话Cookie或者HTML代码，所以CRLF Injection又叫HTTP Response Splitting，简称HRS。
```

<br>
<br>
<br>

13. csrf 如何不带referer访问

```text
通过地址栏，手动输入；从书签里面选择；通过实现设定好的手势。上面说的这三种都是用户自己去操作，因此不算CSRF。

跨协议间提交请求。常见的协议：ftp://,http://,https://,file://,javascript:,data:.最简单的情况就是我们在本地打开一个HTML页面，这个时候浏览器地址栏是file://开头的，如果这个HTML页面向任何http站点提交请求的话，这些请求的Referer都是空的。那么我们接下来可以利用data:协议来构造一个自动提交的CSRF攻击。当然这个协议是IE不支持的，我们可以换用javascript:
```
<br>
<br>
<br>

14. CSRF 成因及防御措施；如果不用 token 如何做防御？

```text
X-Frame-Options
DENY(禁止被 加载进任何frame)
SAMEORIGIN(仅允许被加载进同域内的frame)

X-XSS-Protection
0（表示禁止用这个策略）
1（默认，对危险脚本做一些标志或修改，以阻止在浏览器上熏染执行。）
1;mode=block（强制不熏染，在Chrome下直接跳转到空白页，在IE下返回一个#符号）

这个策略仅针对反射型，对付不了存储型XSS，能识别出反射型是因为提交请求的URL中带有可疑的XSS代码片段。

X-Content-Security-Policy
```
<br>
<br>
<br>

15. Xss worm原理

`攻击者发现目标网站存在XSS漏洞，并且可以编写XSS蠕虫。`
`利用一个宿主（如博客空间）作为传播源头进行XSS攻击。`
<br>
<br>
<br>

16. Cookie的P3P性质

`HTTP响应头的p3字段是W3C公布的一项隐私保护推荐标准，该字段用于标识是否允许目标网站的cookie被另一个域通过加载目标网站而设置或发送，仅IE执行了该策略。`
<br>
<br>
<br>

17. CSRF有何危害？

`篡改目标网站上的用户数据`
`盗取用户隐私数据`
`传播CSRF蠕虫`


